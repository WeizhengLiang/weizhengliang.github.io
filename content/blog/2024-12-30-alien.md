---
title: Knock Knock Alien Is Here
description: Step into the shoes of an unlucky scientist who finds himself on the run from an alien death warrant! In this fast-paced 2D game, you have just 20 seconds to barricade your door and save your life.
date: 2024-12-30
image: /img/alien.png
minRead: 8
author:
  name: Weizheng Liang
  avatar:
    src: /img/profile.png
    alt: Weizheng Liang
---

<div class="grid grid-cols-2 gap-4 mb-8">
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Link</strong><br>
     <a href="https://bestdtang.itch.io/knock-knock-alien-is-here" target="_blank" class="text-blue-600">
      Knock Knock Alien Is Here
    </a>
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Tool</strong><br>
    C+  &nbsp;  Unity 
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Role</strong><br>
    Lead Programmer  &nbsp;  Game Designer
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Genre</strong><br>
    Fast-Paced  &nbsp;  Narrative  &nbsp;  2D
  </div>
</div>

Step into the shoes of an unlucky scientist who finds himself on the run from an alien death warrant! In this fast-paced 2D game, you must dodge the alien's deadly shots while trying to find a way to escape. With limited time and a ticking countdown, every second counts. Can you make it out alive?

<figure class="blog-img-container">
  <img src="/img/projects/alien/coverpage.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Cover of "Knock Knock Alien Is Here"</figcaption>
</figure>

## Core Features

### Game Flow Management

A comprehensive game state management system controlling different game phases and transitions. Features countdown mechanics, score calculation, and scene management, ensuring a smooth and complete gaming experience.

<figure class="blog-img-container">
  <img src="/img/projects/alien/1.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Cover of "Knock Knock Alien Is Here"</figcaption>
</figure>

### Advanced Physics-Driven Drag and Drop System

An advanced physics-driven drag and drop system where object movement and rotation follow realistic physical rules. Objects with different masses have distinct drag feelings and inertial behaviors. The system features real-time collision detection and response, ensuring natural interactions between objects.

<figure class="blog-img-container">
  <img src="/img/projects/alien/show_drag_1.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Advanced Physics-Driven Drag and Drop System</figcaption>
</figure>

### Door Coverage System

A real-time area coverage calculation system that determines how effectively objects block the door. Features multi-object overlap detection and special rule validation, serving as the core mechanic for win/loss conditions.

<figure class="blog-img-container">
  <img src="/img/projects/alien/door_cover_lose.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Real-time percentage display & lose condition</figcaption>
</figure>

<figure class="blog-img-container">
  <img src="/img/projects/alien/door_cover_win.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Visual feedback for valid/invalid placements & win conditions</figcaption>
</figure>

### Collectible System

A diverse collection system featuring unique unlock mechanisms for each collectible. Includes progress tracking, unlock animations, and persistent storage, adding an exploratory element to the gameplay.

<figure class="blog-img-container">
  <img src="/img/projects/alien/collectible_unlock.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Unlock different collectibles</figcaption>
</figure>

<figure class="blog-img-container">
  <img src="/img/projects/alien/lose_collection.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">checkout the collection</figcaption>
</figure>

## Development Journey

### Project Timeline

<div class="timeline-simple">
  <div class="timeline-step">
    <div class="timeline-step-header">
      <span class="timeline-step-icon">ðŸ’¡</span>
      <span class="timeline-step-date">Nov 13 - Nov 16, 2023</span>
    </div>
    <div class="timeline-step-title">Concept & Design</div>
    <p class="timeline-step-desc">
      Brainstormed game concepts, finalized the alien invasion theme with a twist on traditional narratives. Established core mechanics of physics-based object placement and door coverage calculation.
    </p>
  </div>

  <div class="timeline-step">
    <div class="timeline-step-header">
      <span class="timeline-step-icon">ðŸ’»</span>
      <span class="timeline-step-date">Nov 17 - Nov 22, 2023</span>
    </div>
    <div class="timeline-step-title">Prototype Development</div>
    <p class="timeline-step-desc">
      Implemented core gameplay mechanics including drag-and-drop system, physics interactions, and coverage calculation algorithm.
    </p>
  </div>

  <div class="timeline-step">
    <div class="timeline-step-header">
      <span class="timeline-step-icon">ðŸŽ¨</span>
      <span class="timeline-step-date">Nov 23 - Dec 2, 2023</span>
    </div>
    <div class="timeline-step-title">Art Integration & Story</div>
    <p class="timeline-step-desc">
      Integrated visual assets and narrative elements, establishing the game's unique aesthetic and storytelling approach.
    </p>
  </div>

  <div class="timeline-step">
    <div class="timeline-step-header">
      <span class="timeline-step-icon">ðŸ§ª</span>
      <span class="timeline-step-date">Dec 3 - Dec 9, 2023</span>
    </div>
    <div class="timeline-step-title">Testing & Iteration</div>
    <p class="timeline-step-desc">
      Conducted extensive testing, refined gameplay mechanics, and optimized performance across platforms.
    </p>
  </div>
</div>

### Community Engagement

<figure class="blog-img-container">
  <img src="/img/projects/alien/streaming.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">A Twitch streamer enjoying Knock Knock Alien Is Here during a live session</figcaption>
</figure>

### Technical Challenges

#### Physics-Based Drag and Drop System

<div class="text-red-500 font-semibold text-lg">Challenge</div>

- Complex physics interactions between multiple objects
- Maintaining responsive controls while preserving realistic physics
- Accurate collision detection and response during drag operations

<div class="text-green-500 font-semibold text-lg">Solution</div>

- Implemented custom physics handlers using Unity's physics engine
- Created state management system for smooth transitions between drag and free states
- Optimized collision detection using spatial partitioning

#### Door Coverage Detection

<div class="text-red-500 font-semibold text-lg">Challenge</div>

- Real-time calculation of door coverage percentage
- Handling multiple overlapping objects accurately
- Performance optimization for complex coverage scenarios

<div class="text-green-500 font-semibold text-lg">Solution</div>

- Developed grid-based coverage detection system
- Implemented efficient overlap detection algorithms
- Used spatial optimization to reduce calculation overhead

#### Performance Optimization

<div class="text-red-500 font-semibold text-lg">Challenge</div>

- Heavy CPU load from physics calculations
- Memory management for dynamic object creation
- Frame rate drops during complex interactions

<div class="text-green-500 font-semibold text-lg">Solution</div>

- Implemented object pooling for frequently created objects
- Optimized physics calculations using spatial partitioning
- Created efficient data structures for quick lookups and updates

## Game Flow and Key Code Snippets

This diagram illustrates the core gameplay loop:

<figure class="blog-img-container">
  <img src="/img/projects/alien/2.png" class="blog-img" alt="img" loading="lazy" />
</figure>

### Code Implementation

#### Core Drag System Implementation (DragSystem.cs)

```csharp
public class DragSystem : IGameSystem
{
    private readonly DraggableObject owner;
    private readonly Camera mainCamera;
    private readonly Rigidbody2D rb;

    private HingeJoint2D dragJoint;
    private GameObject dragAnchor;

    private Vector2 lastDragPosition;
    private Vector2 dragStartPosition;
    private Vector2 lastDragDirection;
    private Vector2 dragVelocity;

    public void UpdateDrag(Vector2 mousePosition)
    {
        if (dragAnchor == null) return;

        // Update position
        Vector2 currentPos = dragAnchor.transform.position;
        Vector2 newPos = Vector2.Lerp(currentPos, mousePosition, owner.DragSpeed * Time.deltaTime);
        dragAnchor.transform.position = newPos;

        // Update velocity
        if (Time.time - lastVelocityUpdateTime > velocityUpdateInterval)
        {
            dragVelocity = (mousePosition - lastDragPosition) / velocityUpdateInterval;
            lastDragPosition = mousePosition;
            lastVelocityUpdateTime = Time.time;
        }

        // Update rotation
        UpdateRotation(mousePosition);
    }
}
```

#### State Management and Event System

```csharp
public class DraggableObjectState
{
    private bool isDragging;
    private bool isInvalidPosition;
    private bool isMouseOver;
    private bool isFrozen;
    private readonly DraggableObject owner;

    public void SetDragging(bool value)
    {
        if (isDragging != value)
        {
            isDragging = value;
            DraggableObjectManager.Instance?.SetDragging(value, owner);
            DraggableObjectEvents.RaiseDragStateChanged(owner, value);
        }
    }
}
```

#### System Architecture Design

```csharp
public class DraggableObject : MonoBehaviour
{
    #region Systems
    public DraggableObjectState state;
    private GameSystemManager systemManager;
    private DragSystem dragSystem;
    private MaterialSystem materialSystem;
    private PhysicsSystem physicsSystem;
    private PlacementSystem placementSystem;
    #endregion

    protected virtual void InitializeSystems()
    {
        systemManager = new GameSystemManager();
        state = new DraggableObjectState(this);

        dragSystem = new DragSystem(this, Camera.main);
        materialSystem = new MaterialSystem(this);
        physicsSystem = new PhysicsSystem(this);
        placementSystem = new PlacementSystem(this, collisionLayer, surfaceIgnoreDistance);

        systemManager.AddSystem(dragSystem);
        systemManager.AddSystem(materialSystem);
        systemManager.AddSystem(physicsSystem);
        systemManager.AddSystem(placementSystem);
    }
}
```

#### Collectible System Implementation

```csharp
public class CollectibleObject : DraggableObject
{
    protected override bool IsValidPlacement()
    {
        if (IsUnlocked())
            return base.IsValidPlacement();

        Collider2D[] colliders = Physics2D.OverlapBoxAll(
            transform.position,
            col.bounds.size,
            transform.rotation.eulerAngles.z,
            collisionLayer
        );

        foreach (Collider2D otherCol in colliders)
        {
            if (otherCol != col && otherCol.gameObject != gameObject)
            {
                TriggerObject trigger = otherCol.GetComponent<TriggerObject>();
                if (trigger != null && !IsUnlocked())
                {
                    if (trigger.CompareTag(data.unlockMethod.ToString()))
                    {
                        currentMergeTarget = otherCol.gameObject;
                        return true;
                    }
                }
            }
        }
        return base.IsValidPlacement();
    }
}
```

### Key Algorithms

Drag Physics System with Inertia and Rotation Algorithm (DragSystem.cs)

```csharp
public class DragSystem : IGameSystem
{
    private Vector2 dragVelocity;
    private float lastVelocityUpdateTime;
    private readonly float velocityUpdateInterval = 0.1f;
    private readonly float dragInertiaMultiplier = 0.3f;
    private Vector2 lastDragDirection;

    public void UpdateDrag(Vector2 mousePosition)
    {
        // Position smooth interpolation
        Vector2 currentPos = dragAnchor.transform.position;
        Vector2 newPos = Vector2.Lerp(currentPos, mousePosition, owner.DragSpeed * Time.deltaTime);
        dragAnchor.transform.position = newPos;

        // Velocity calculation
        if (Time.time - lastVelocityUpdateTime > velocityUpdateInterval)
        {
            dragVelocity = (mousePosition - lastDragPosition) / velocityUpdateInterval;
            lastDragPosition = mousePosition;
            lastVelocityUpdateTime = Time.time;
        }

        // Rotation calculation
        Vector2 direction = mousePosition - dragStartPosition;
        if (direction.magnitude > 0.01f)
        {
            float angle = Vector2.SignedAngle(lastDragDirection, direction);
            if (Mathf.Abs(angle) > owner.RotationThreshold)
            {
                angle *= owner.RotationDamping;
                owner.transform.Rotate(0, 0, angle * owner.RotationSpeed * Time.deltaTime);
            }
            lastDragDirection = direction;
        }
    }

    public void EndDrag()
    {
        // Apply inertia
        if (rb != null)
        {
            Vector2 finalVelocity = dragVelocity / Time.fixedDeltaTime;
            rb.velocity = finalVelocity * dragInertiaMultiplier;
        }
    }
}
```

### Algorithm Features:

- Implements smooth drag effect
- Physics-based inertia system
- Natural rotation control
- Performance optimization (using time intervals for updates)
- Threshold and damping system to prevent jittering

#### Door Area Coverage Calculation Algorithm (PlacementSystem.cs)

```csharp
public class PlacementSystem : IGameSystem
{
    private readonly float surfaceIgnoreDistance;

    public virtual bool ValidatePlacement()
    {
        if (col == null) return true;

        // Efficient collision detection using Physics2D.OverlapBoxAll
        Collider2D[] colliders = Physics2D.OverlapBoxAll(
            owner.transform.position,
            col.bounds.size,
            owner.transform.rotation.eulerAngles.z,
            collisionLayer
        );

        bool isValid = true;
        foreach (Collider2D otherCol in colliders)
        {
            if (otherCol != col && otherCol.gameObject != owner.gameObject)
            {
                // Get precise collision distance using Physics2D.Distance
                ColliderDistance2D distance = Physics2D.Distance(col, otherCol);
                if (distance.distance < -surfaceIgnoreDistance)
                {
                    isValid = false;
                    break;
                }
            }
        }

        owner.state.SetInvalidPosition(!isValid);
        return isValid;
    }

    public void OnDrawGizmos()
    {
        if (col == null) return;

        // Visualization of collision bounds and surface ignore distance
        if (col is PolygonCollider2D poly)
        {
            Vector2[] points = poly.points;
            for (int i = 0; i < points.Length; i++)
            {
                Vector2 current = owner.transform.TransformPoint(points[i]);
                Vector2 next = owner.transform.TransformPoint(points[(i + 1) % points.Length]);
                Vector2 dir = (next - current).normalized;
                Vector2 normal = new Vector2(-dir.y, dir.x);

                Gizmos.DrawLine(
                    current + normal * surfaceIgnoreDistance,
                    next + normal * surfaceIgnoreDistance
                );
            }
        }
    }
}
```

### Algorithm Features

- Efficient spatial partitioning detection
- Precise collision distance calculation
- Handles object rotation
- Includes error tolerance (surfaceIgnoreDistance)
- Visual debugging support

### Team & Communication

#### Team Structure

<div class="team-grid">
  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/liang.jpg" alt="Weizheng Liang" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Weizheng Liang</div>
      <div class="team-role">Lead Programmer</div>
      <div class="team-skills">
        <li>Core gameplay systems</li>
        <li>Performance optimization</li>
        <li>Technical architecture</li>
        <li>Development tools</li>
      </div>
    </div>
  </div>

  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/cao.jpg" alt="Mingxuan Cao" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Mingxuan Cao</div>
      <div class="team-role">2D Artist & UI Designer</div>
      <div class="team-skills">
        <li>Visual assets creation</li>
        <li>UI/UX design</li>
        <li>Game design support</li>
        <li>Art direction</li>
      </div>
    </div>
  </div>

  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/liu.jpg" alt="Ziyi Liu" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Ziyi Liu</div>
      <div class="team-role">Story & Game Designer</div>
      <div class="team-skills">
        <li>Narrative design</li>
        <li>Story development</li>
        <li>Game design</li>
        <li>Level design support</li>
      </div>
    </div>
  </div>

  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/tang.jpg" alt="Weidi Tang" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Weidi Tang</div>
      <div class="team-role">Product Manager & VFX Artist & Programmer</div>
      <div class="team-skills">
        <li>Visual effects</li>
        <li>Technical support</li>
        <li>Game design</li>
        <li>Performance optimization</li>
      </div>
    </div>
  </div>

  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/yu.jpg" alt="Shiqi Yu" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Shiqi Yu</div>
      <div class="team-role">Comic Artist & 2D Artist</div>
      <div class="team-skills">
        <li>Comic creation</li>
        <li>2D art assets</li>
        <li>Game design</li>
        <li>Visual storytelling</li>
      </div>
    </div>
  </div>

  <div class="team-member">
    <div class="team-avatar">
      <img src="/img/projects/alien/zhao.jpg" alt="Ange Zhao" class="team-avatar-img" />
    </div>
    <div class="team-info">
      <div class="team-name">Ange Zhao</div>
      <div class="team-role">Concept Artist & 2D Artist</div>
      <div class="team-skills">
        <li>Concept art</li>
        <li>2D art assets</li>
        <li>Game design</li>
        <li>Visual development</li>
      </div>
    </div>
  </div>
</div>

## Communication Flow

<div class="tools-meetings-grid">
  <div class="info-card">
    <div class="info-card-title">Tools</div>
    <div class="info-card-content">
      <div class="info-item">
        <span class="info-label">WeChat</span>
        <span class="info-value">Daily communication</span>
      </div>
      <div class="info-item">
        <span class="info-label">Google Sheets</span>
        <span class="info-value">Task tracking</span>
      </div>
    </div>
  </div>

  <div class="info-card">
    <div class="info-card-title">Meetings</div>
    <div class="info-card-content">
      <div class="info-item">
        <span class="info-label">Daily Standup</span>
        <span class="info-value">15 minutes</span>
      </div>
      <div class="info-item">
        <span class="info-label">Weekly Review</span>
        <span class="info-value">3 hour</span>
      </div>
    </div>
  </div>
</div>

## Learning Outcomes

<div class="learning-outcomes-grid">
  <div class="learning-card">
    <div class="learning-card-title">Technical Growth</div>
    <div class="learning-list">
      <li>Deepened understanding of physics-based game development</li>
      <li>Mastered real-time calculation optimization techniques</li>
      <li>Gained expertise in Unity's physics engine and custom tooling development</li>
      <li>Enhanced proficiency in performance optimization and debugging</li>
    </div>
  </div>

  <div class="learning-card">
    <div class="learning-card-title">Team Collaboration</div>
    <div class="learning-list">
      <li>Successfully led a cross-functional team of 6 members</li>
      <li>Improved communication and coordination skills in a game development context</li>
      <li>Learned to balance technical constraints with design aspirations</li>
      <li>Developed effective problem-solving strategies in a team environment</li>
    </div>
  </div>

  <div class="learning-card">
    <div class="learning-card-title">Personal Development</div>
    <div class="learning-list">
      <li>Strengthened project management capabilities</li>
      <li>Enhanced ability to make technical decisions under time constraints</li>
      <li>Improved documentation and knowledge sharing practices</li>
      <li>Developed a deeper appreciation for user-centered design</li>
    </div>
  </div>
</div>

## Future Plans

### Gameplay Expansion

Introduce new object types and mechanics to enhance strategic depth

- Additional object types with unique physical properties
- Community level sharing system
- Advanced puzzle mechanics

### Narrative Enhancement

Expand story branches and narrative possibilities

- Multiple story paths and endings
- Character background stories
- Interactive narrative elements

### Technical Improvements

Optimize performance and expand platform support

- Mobile platform optimization
- Enhanced physics calculations
- Improved coverage detection system

### Social Features

Add competitive and collaborative elements

- Global leaderboard system
- Player achievements
- Community challenges

### User Experience

Enhance overall game feel and accessibility

- Improved tutorial system
- Enhanced visual feedback
- Refined sound design
- Accessibility options

### Development Timeline

<div class="text-blue-400 font-semibold text-lg">Short Term</div>

- Performance optimization for current platforms
- Tutorial system improvements
- Basic leaderboard implementation

<div class="text-blue-500 font-semibold text-lg">Medium Term</div>

- New object types and mechanics
- Community level sharing features
- Enhanced visual effects

<div class="text-blue-600 font-semibold text-lg">Long Term</div>

- Mobile platform support
- Multiplayer features
- Advanced narrative content

**Play game**: [Knock Knock Alien Is Here](https://bestdtang.itch.io/knock-knock-alien-is-here)

**Source code**: [Source Code of Knock Knock Alien Is Here](https://github.com/WeizhengLiang/Knock-Knock-Alien-is-Here).
