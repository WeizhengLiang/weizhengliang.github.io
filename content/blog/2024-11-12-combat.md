---
title: Melee Combat System
description: A Unity-based combat framework that demonstrates core mechanics of modern action games, featuring combo systems, weapon switching, and animation-driven gameplay.
date: 2024-11-12
image: /img/combat.gif
minRead: 10
author:
  name: Weizheng Liang
  avatar:
    src: /img/profile.png
    alt: Weizheng Liang
---

<div class="grid grid-cols-2 gap-4 mb-8">
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Link</strong><br>
     <a href="https://github.com/WeizhengLiang/melee-combat-system/releases/tag/v0.1" target="_blank" class="text-blue-600">
      Melee Combat System's Download Page
    </a>
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Tool</strong><br>
    C+  &nbsp;  Unity 
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Role</strong><br>
    Solo Developer
  </div>
  <div class="bg-blue-50 rounded-lg p-4">
    <strong>Genre</strong><br>
    Action
  </div>
</div>

My journey into combat system development began with an inspiring moment - watching the reveal of "Black Myth: WuKong". As a long-time fan of the WuKong character in Chinese traditional culture, seeing this beloved character brought to life in a AAA game sparked my curiosity about combat system development. This curiosity evolved into a dedicated learning project, laying the groundwork for potentially larger game development endeavors.

<figure class="blog-img-container">
  <img src="/img/projects/combat/wukong.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Wukong</figcaption>
</figure>

## Key Features

### Dynamic Combo System

<figure class="blog-img-container">
  <img src="/img/projects/combat/MCS_003.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">A fast-paced, time-sensitive three-hit combo system that seamlessly transitions from light to heavy attacks, rewarding precise timing and skillful execution.</figcaption>
</figure>

### Strategic Attack State Design

<figure class="blog-img-container">
  <img src="/img/projects/combat/attack_state.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">A meticulously crafted three-phase attack system—Anticipation, Impact, and Recovery—that delivers a rhythmic and engaging combat flow, balancing strategy and intensity.</figcaption>
</figure>

### Precise Hit Detection System

<figure class="blog-img-container">
  <img src="/img/projects/combat/MCS_003.gif" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">An animation-driven hit detection framework that accurately maps weapon trajectories and calculates hit trails for unparalleled combat precision.</figcaption>
</figure>

### Robust Editor Tools

<figure class="blog-img-container">
  <img src="/img/projects/combat/editor_window.png" class="blog-img" alt="img" loading="lazy" />
  <figcaption class="blog-img-caption">Custom-built Unity editor tools that empower developers with an intuitive and efficient setup process for characters, weapons, and attack configurations.</figcaption>
</figure>

## Technical Implementation

### System Architecture

The combat system is built on four primary interconnected systems, each handling specific aspects of the gameplay experience:

<figure class="blog-img-container">
  <img src="/img/projects/combat/flow.png" class="blog-img-large" alt="img" loading="lazy" />
</figure>

#### Input System

Centralizes all input processing through the InputManager, which routes combat-specific inputs to the MeleeCombatInput component for specialized handling of attacks, combos, weapon toggles, and defensive actions.

#### Combat System

The core gameplay logic resides in the MeleeCombatSystem, working in conjunction with the WeaponManager for equipment states and the DamageHandler for combat calculations.

#### Animation System

Managed by the RPGCharacterController, this system handles all character animations and their associated events, ensuring smooth transitions between combat states and accurate hit detection.

#### UI System

The CombatUIManager provides real-time feedback through combat state displays, debugging tools, and NPC interaction interfaces.

### Sequence Diagrams

The following sequence diagrams illustrate the key interactions between system components during combat actions:

1. Attack Sequence
   Demonstrates the flow of an attack action from input to damage calculation and UI updates:

<figure class="blog-img-container">
  <img src="/img/projects/combat/1.png" class="blog-img-large" alt="img" loading="lazy" />
</figure>

2. Weapon Switch Sequence
   Shows the process of switching weapons and updating related systems:

<figure class="blog-img-container">
  <img src="/img/projects/combat/2.png" class="blog-img-large" alt="img" loading="lazy" />
</figure>

## Technical Challenges

### Animation-Driven Hit Detection

<div class="text-red-500 font-semibold text-lg">Problem</div>

Synchronizing hit detection with animation frames while maintaining performance.

<div class="text-green-500 font-semibold text-lg">Solution</div>

Developed an event-based hit detection system that:

- Uses animation events for precise timing
- Implements efficient collision detection
- Manages weapon trail effects

<div class="text-blue-600 font-semibold text-lg">Result</div>

Significantly reduced setup time for new characters and attacks

## Learning Outcomes

### Technical Skills Gained

#### Combat System Architecture

- Modular system design
- Event-driven architecture
- State management patterns

#### Unity Development

- Animation system (Mecanim)
- Custom editor tool development
- Event system implementation

#### Game Design

- Combat timing design
- Player feedback systems
- Game feel optimization

### Project Experience

- Structured system development
- Technical documentation writing
- Combat mechanics implementation

## Future Development

### Planned Features

#### Combat System Enhancement

- Additional weapon types beyond unarmed and two-hand sword
- More complex combo variations
- Advanced blocking mechanics

#### AI Combat Behaviors

- NPC combat AI
- Enemy behavior patterns
- Dynamic difficulty adjustment

#### System Extensions

- More character customization options
- Additional animation sets
- Enhanced visual effects

### Technical Improvements

#### Performance Optimization

- Hit detection optimization
- Animation system refinement
- Memory management improvements

#### Code Architecture

- Enhanced modularity
- Better event system
- More flexible weapon system

**Download page**: [Melee Combat System](https://github.com/WeizhengLiang/melee-combat-system/releases/tag/v0.1)

**Source code**: [Source Code of Melee Combat System](https://github.com/WeizhengLiang/melee-combat-system/tree/main)
